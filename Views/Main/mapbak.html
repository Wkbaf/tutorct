<style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #mapPlaceholder {
        height: 400px;
      }

      #floating-panel {
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
      #right-panel {
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }

      #right-panel select, #right-panel input {
        font-size: 15px;
      }

      #right-panel select {
        width: 100%;
      }

      #right-panel i {
        font-size: 12px;
      }
      #right-panel {
        overflow-y: scroll;
        height:400px;
        float: right;
        width: 390px;
      }
      .mapPlaceholder0 {
        margin-right: 0px;
      }
/*      .mapPlaceholder {
        margin-right: 400px;
      }*/
      #floating-panel {
        background: #fff;
        padding: 5px;
        font-size: 14px;
        font-family: Arial;
        border: 1px solid #ccc;
        box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);
        display: none;
      }
      @media print {
        #mapPlaceholder {
          height: 500px;
          margin: 0;
        }
        #right-panel {
          float: none;
          width: auto;
        }
      }
      @media screen and (max-width: 480px) {
        .mapPlaceholder {
        margin-right: 0px;
      }
    }

        #iw-container  .iw-title {
       font-family: 'Open Sans Condensed', sans-serif;
       font-size: 22px;
       font-weight: 400;
       padding: 10px;
       background-color: #48b5e9;
       color: white;
       margin: 1px;
       border-radius: 2px 2px 0 0; /* In accordance with the rounding of the default infowindow corners. */
    }

        .gm-style-iw {
       width: 350px !important;
       top: 0 !important;
       left: 0 !important;
       border-radius: 2px 2px 0 0;
    }

    .gm-style-iw {
   width: 350px !important;
   top: 0 !important;
   left: 0 !important;
   background-color: #fff;
   box-shadow: 0 1px 6px rgba(178, 178, 178, 0.6);
   border: 1px solid rgba(72, 181, 233, 0.6);
   border-radius: 2px 2px 0 0;
}
.gm-style-iw {
   width: 350px !important;
   top: 15px !important; // move the infowindow 15px down
   left: 0 !important;
   background-color: #fff;
   box-shadow: 0 1px 6px rgba(178, 178, 178, 0.6);
   border: 1px solid rgba(72, 181, 233, 0.6);
   border-radius: 2px 2px 0 0;
}
.gm-style-iw {
   width: 350px !important;
   top: 15px !important;
   left: 0 !important;
   background-color: #fff;
   box-shadow: 0 1px 6px rgba(178, 178, 178, 0.6);
   border: 1px solid rgba(72, 181, 233, 0.6);
   border-radius: 2px 2px 10px 10px; // apply 10px to the bottom corners of the infowindow
}
.iw-bottom-gradient {
      position: absolute;
      width: 326px;
      height: 25px;
      bottom: 10px;
      right: 16px;
      background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);
      background: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
      background: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
      background: -ms-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);
   }
    </style>
<section class="main-content">
                <div class="page-title P30">
                    <h2 class="fl-l">Seek your future with map</h2><div class="iw-bottom-gradient"></div>

                    <a class="share-link fl-r" href="#"><i class="icon-export"></i>Share</a>
                </div>

                <div id="floating-panel">
                  <strong>Start: Your location</strong>
                  <br>
                  <strong>End:</strong>
                  <select id="end" ng-init="loadStudentMap()">
                  <option value="">Your destiny</option>
                    <option value="{{x.value.diachi}}" ng-repeat="x in allStudent">{{x.value.fullname}}</option>
                  </select>
                </div>
                <div class="row">
                    <div class="col-md-8 col-xs-12"  ng-init="loadStudentMap()">
                        <div id="mapPlaceholder"></div>
                        <div ng-controller="StudentController" id="allStudents"></div>
                    </div>
                    <div class="col-md-4 col-xs-12" id="right-panel"></div>
                </div>

                <div class="row">
                    <div class="col-xs-12 col-md-6">
                        <div class="post-item P30">
                            <h2 class="h1 title">BECOME A TUTOR/STUDENT to join with us</h2>

                            <p>
                                You're student and want find tutor. Best way have an account student and join with Tutor.ct
                            </p>

                            <a href="#/bstudent" class="custom-btn colored">Create Now</a>

                            <p>
                                You're tutor and want find student. Why you don't have an account Tutor.ct
                            </p>

                            <a href="#/btutor" class="custom-btn colored">Create Now</a>

                            <div class="row">
                                <div class="col-xs-12 col-md-6 col-lg-6">
                                    <h5>Tutor.ct MAP Guide</h5>

                                    <p>
                                        When you required share location just click ok.<br>
                                        You can see info when mouseover
                                    </p>
                                </div>

                                <div class="col-xs-12 col-md-6 col-lg-6">
                                    <h5>Online Courses</h5>

                                    <p>
                                        Designer member portfolio gem cutlery. Delegate polo solid diamond silver extra crafted penthouse stockmarket noble bonds. Treasure noble reserved affluent cigar. Bonds symbolizing townhome club.
                                    </p>

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12 col-md-6">
                        <div class="block-courses_details clearfix bg-0">
                            <div class="col-xs-12 col-sm-3 col-md-5 col-lg-4">
                                <div class="column-description P30 bg-4 corner">
                                    <h5>emma Cambell</h5>

                                    <div class="text">
                                        <p>
                                            Property metropolitan purebred wishlist bonds club presidential. Designer wine society expensive sheer auction gilded stockmarket impressive.
                                        </p>
                                    </div>

                                    <a href="#" class="more-link"><i class="arrow"></i>Learn more</a>
                                </div>

                                <div class="col-xs-6 col-sm-12 team-img-container">
                                    <img class="img-responsive" src="images/users/b4.jpg" alt="demo" />
                                </div>
                            </div>

                            <div class="col-xs-12 col-sm-9 col-md-7 col-lg-8">
                                <div class="P30">
                                    <h2 class="title">We offer, how to apply for postgraduate study, and immigration and other important information.</h2>

                                    <p>
                                        Property gifted extra world rich pearl treasure. Politically impresario monogram in monogram cutlery salon pearl educated. Fine genuine acumen engraved estate crafted cigar reserved enthusiast suite. Rare ornamental cruise imported gifted luxury acumen grande polo saphire.
                                    </p>

                                    <p class="address">
                                        <i class="icon-location base-text-color"></i>

                                        <span>Rockefeller Center, 45 Rockefeller Plaza, New York, NY, USA</span>
                                    </p>

                                    <a href="#" class="custom-btn big long colored">Explore More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-12">
                        <div class="content-intro" style="background:url(images/slide_img/slider_big_7.jpg)">
                            <div class="inner">
                            <p>Advice Center</p>
                                <p class="title">Free support to all students</p>

                                <p>
                                    Genuine wealth stockmarket first-class guests classical suite fine designer member. Manor housekeeping cocktail in five-star. Becoming yacht classical ambassador benefiting gilded.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

        <script >

        //array marker for show info window
        var markers = [];

            if (navigator.geolocation)
            {
                navigator.geolocation.getCurrentPosition(showCurrentLocation);
            }
            else
            {
               alert("Geolocation API not supported.");
            }

            function showCurrentLocation(position)
            {
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;

                // var coords = new google.maps.LatLng(latitude, longitude);
                var coords = [{
                    lat: position.coords.latitude,
                    lng: position.coords.longitude,
                    title: 'Your location',
                    label: 'YOU',
                    icon: 'img/icon1.png'
                }];
                //your location
                var here = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

                 // var infowindow = new google.maps.InfoWindow();
                 var infowindow =  new google.maps.InfoWindow({
                    content: ''
                });

                //call function add location to coord
                 addLocation(coords);

                 //direct map
                var directionsDisplay = new google.maps.DirectionsRenderer;
                var directionsService = new google.maps.DirectionsService;

                var mapOptions = {
                zoom: 15,
                center: here,
                // center: new google.maps.LatLng(position.coords.latitude,position.coords.longitude),
                mapTypeControl: true,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            //create the map, and place it in the HTML map div
            map = new google.maps.Map(
            document.getElementById("mapPlaceholder"), mapOptions
            );

            // set right panel
            directionsDisplay.setMap(map);
            directionsDisplay.setPanel(document.getElementById('right-panel'));

            var control = document.getElementById('floating-panel');
            control.style.display = 'block';
            map.controls[google.maps.ControlPosition.TOP_CENTER].push(control);

            var onChangeHandler = function() {
            calculateAndDisplayRoute(directionsService, directionsDisplay,here);
            };
            // document.getElementById('start').addEventListener('change', onChangeHandler);
            document.getElementById('end').addEventListener('change', onChangeHandler);

            var bounds = new google.maps.LatLngBounds();
            //set multi marker
            for (var i = 0; i < coords.length; i++){
                var latlng = new google.maps.LatLng(coords[i].lat, coords[i].lng);

                var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                label: coords[i].label,
                title: coords[i].title,
                icon: coords[i].icon,
                animation: google.maps.Animation.DROP
                });


              bindInfoWindow(marker, map, infowindow, "<p>" + coords[i].title + "</p>",coords[i].title);


                //gioi han khung nhin
                bounds.extend(here);

            }

            //load marker
            setTimeout(function() {
                  for (var i = 0; i < coords.length; i++){
                var latlng = new google.maps.LatLng(coords[i].lat, coords[i].lng);

                var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                label: coords[i].label,
                title: coords[i].title,
                icon: coords[i].icon,
                animation: google.maps.Animation.DROP
                });


              bindInfoWindow(marker, map, infowindow, "<p>" + coords[i].title + "</p>",coords[i].title);


                //gioi han khung nhin
                bounds.extend(here);

            }
             }, 1000);

            // Don't zoom in too far on only one marker
            if (bounds.getNorthEast().equals(bounds.getSouthWest())) {
               var extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 0.01, bounds.getNorthEast().lng() + 0.01);
               var extendPoint2 = new google.maps.LatLng(bounds.getNorthEast().lat() - 0.01, bounds.getNorthEast().lng() - 0.01);
               bounds.extend(extendPoint1);
               bounds.extend(extendPoint2);
            }

            map.fitBounds(bounds);

            }

            //function for show info window
            function bindInfoWindow(marker, map, infowindow, html, Ltitle) {
                google.maps.event.addListener(marker, 'mouseover', function() {
                        infowindow.setContent(html);
                        infowindow.open(map, marker);

                });
                google.maps.event.addListener(marker, 'mouseout', function() {
                    infowindow.close();

                });
            }

            function addLocation(coord) {

                var coords = coord;
                var geocoder = new google.maps.Geocoder();

               var scope = angular.element($("#allStudents")).scope();
                angular.forEach(scope.allStudent, function(student, key) {

                        if(student.value.gender == 'Nam'){
                            geocoder.geocode( { 'address': student.value.diachi}, function(results, status) {
                                if (status == google.maps.GeocoderStatus.OK) {
                                    var location = {
                                        lat: results[0].geometry.location.lat(),
                                        lng: results[0].geometry.location.lng(),
                                        title: student.value.fullname,
                                        label: student.value.fullname.charAt(0),
                                        icon: 'img/icon3.png'
                                    }

                                    coords.push(location);
                                }
                             });
                        }else {
                            geocoder.geocode( { 'address': student.value.diachi}, function(results, status) {
                                if (status == google.maps.GeocoderStatus.OK) {
                                    var location = {
                                        lat: results[0].geometry.location.lat(),
                                        lng: results[0].geometry.location.lng(),
                                        title: student.value.fullname,
                                        label: student.value.fullname.charAt(0),
                                        icon: 'img/icon2.png'
                                    }

                                    coords.push(location);
                                }
                             });
                        }
                    });
                return coords;
            }

        </script>
        <script>
        function calculateAndDisplayRoute(directionsService, directionsDisplay, here) {
            var end = document.getElementById('end').value;

                directionsService.route({
                origin: here,
                destination: end,
                travelMode: 'DRIVING'
                }, function(response, status) {
                if (status === 'OK') {
                directionsDisplay.setDirections(response);
                } else {
                window.alert('Directions request failed due to ' + status);
                }
            });
        }
        </script>
        <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDVZigHknKSA2GJR7tKynIdKk0CX2KFdJM&callback=initMap">
    </script>